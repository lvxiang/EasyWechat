<?xml version="1.0" encoding="UTF-8" ?>
<sessions>
	<context-param>
		<param>
			<key>accountName</key>
			<value>巡检系统</value>
		</param>
	</context-param>
	<session-chain id="register-chain">
		<session id="entrance" class="enter">
			<type>text</type>
			<match>(注册|#1)</match>
			<classname></classname>
			<function></function>
			<conditional>
				<condition>
					<value>new</value>
					<target>username-password</target>
					<return>请输入用户名和密码，以###分开(用户名###密码)</return>
				</condition>
				<condition>
					<value>old</value>
					<target>confirm</target>
					<return>您的微信账户已经绑定过员工账户了，是否要重新绑定？(是|否)</return>
				</condition>
			</conditional>
			<mismatch>
				<return>账户绑定失败，请按照系统提示重新开始</return>
			</mismatch>
		</session>
		<session id="username-password">
			<type>text</type>
			<match>.*###.*</match>
			<classname></classname>
			<function></function>
			<conditional>
				<condition>
					<value>yes</value>
					<target>new-username-password</target>
					<return>账户绑定成功！请输入新的用户名和密码(用户名###密码):</return>
				</condition>
				<condition>
					<value>no</value>
					<target>end</target>
					<return>账户绑定失败，无效的用户名或密码</return>
				</condition>
			</conditional>
			<mismatch>
				<return>账户绑定失败，请按照系统提示进行操作</return>
			</mismatch>
		</session>
		<session id="new-username-password">
			<type>text</type>
			<match>.*###.*</match>
			<classname></classname>
			<function></function>
			<conditional>
				<condition>
					<value>yes</value>
					<target>end</target>
					<return>恭喜您！账户绑定成功！为了您的账户安全，请立刻删除包含您账户信息的消息！</return>
				</condition>
				<condition>
					<value>illegal-username</value>
					<target>new-username-password</target>
					<return>非法的用户名请输入6-10位的字母或数字，请不要以数字开头</return>
				</condition>
				<condition>
					<value>exist-username</value>
					<target>new-username-password</target>
					<return>该用户名已存在，请重新输入</return>
				</condition>
				<condition>
					<value>illegal-password</value>
					<target>new-username-password</target>
					<return>无效的密码，请输入6-16位的字母或数字</return>
				</condition>
			</conditional>
			<mismatch>
				<return>账户绑定失败，请按照系统提示进行操作</return>
			</mismatch>
		</session>
		<session id="confirm">
			<type>text</type>
			<match>(是|否)</match>
			<classname></classname>
			<function></function>
			<conditional>
				<condition>
					<value>end</value>
					<target>end</target>
				</condition>
				<condition>
					<value>yes</value>
					<target>username-password</target>
					<return>请输入用户名和密码，以#分开</return>
				</condition>
			</conditional>
		</session>
	</session-chain>
	<session-chain id="subscribe-chain">
		<session id="subscribe" class="enter">
			<type>event</type>
			<match>subscribe</match>
			<classname></classname>
			<conditional>
				<condition>
					<value>yes</value>
					<target>end</target>
					<return>
						欢迎关注${accountName},您的微信账户已经完成绑定，
						您可以立即开始使用。输入"注册"或"#1"以重新绑定当前
						帐号。
					</return>
				</condition>
				<condition>
					<value>no</value>
					<target>end</target>
					<return>
						欢迎关注${accountName},您需要先进行帐号绑定,
						请输入"注册"或"#1"开始帐号绑定流程。
					</return>
				</condition>
			</conditional>
		</session>
	</session-chain>
</sessions>